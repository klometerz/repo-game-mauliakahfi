<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Dice of Love</title>
  <meta name="description" content="Game Dice of Love: lempar dadu, jalankan aksi romantis/flirty. PG‚Äë13, fun, consent‚Äëfirst.">
  <link rel="icon" href="data:;base64,iVBORw0KGgo=">
  <style>
    :root{
      --bg:#0e0f1b; --panel:#15172b; --ink:#f6f7ff; --muted:#9aa0b4; --accent:#ff86b6; --accent2:#9fa8ff; --good:#6ee7b7; --warn:#fbbf24;
      --radius:16px; --ring:0 0 0 2px rgba(255,134,182,.35), 0 16px 50px rgba(0,0,0,.35);
    }
    html,body{height:100%;margin:0;background:radial-gradient(1200px 800px at 10% -20%,#1c1e3d 0%,#0e0f1b 55%);color:var(--ink);font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}
    .wrap{max-width:980px;margin:24px auto;padding:20px}
    header{display:flex;gap:16px;align-items:center}
    .logo{width:60px;height:60px;border-radius:14px;background:conic-gradient(from 90deg,#ffd6e6,#d7cbff,#d0fff2,#ffd6e6);display:grid;place-items:center;color:#1b1d3a;font-weight:800}
    h1{margin:0;font-size:22px}
    .sub{color:var(--muted);font-size:14px}

    .panel{margin-top:16px;background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.02));border:1px solid rgba(255,255,255,.08);border-radius:var(--radius);padding:16px;box-shadow:var(--ring)}

    .controls{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
    .pill{padding:8px 12px;border-radius:999px;border:1px solid rgba(255,255,255,.15);background:rgba(255,255,255,.05)}
    select,button,input[type="checkbox"]{accent-color:#ff86b6}
    select,button{color:var(--ink);background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.15);border-radius:12px;padding:10px 14px;cursor:pointer}
    button:hover{transform:translateY(-1px)}

    .board{display:grid;grid-template-columns: 1.1fr .9fr;gap:16px;margin-top:16px}
    @media (max-width: 900px){ .board{grid-template-columns:1fr} }

    .stage{display:grid;grid-template-rows:auto 1fr auto;gap:12px}

    .dice-area{display:flex;gap:18px;justify-content:center;align-items:center}
    .die{width:120px;height:120px;border-radius:24px;background:linear-gradient(180deg,#20264b,#131734);position:relative;border:1px solid rgba(255,255,255,.1);box-shadow:0 10px 30px rgba(0,0,0,.4);display:grid;place-items:center}
    .pip{width:18px;height:18px;background:#fff;border-radius:50%;box-shadow:inset 0 0 0 2px rgba(0,0,0,.12)}
    .face{position:absolute;inset:0;display:grid;grid-template-columns:repeat(3,1fr);grid-template-rows:repeat(3,1fr);gap:6px;padding:16px}
    .hide{display:none}

    .roll{animation:roll .7s ease-in-out}
    @keyframes roll{0%{transform:rotate(0) scale(1)}50%{transform:rotate(20deg) scale(1.07)}100%{transform:rotate(0) scale(1)}}

    .result{min-height:120px;display:flex;align-items:center;justify-content:center;text-align:center;background:linear-gradient(180deg,rgba(255,255,255,.04),rgba(255,255,255,.01));border:1px dashed rgba(255,255,255,.16);border-radius:var(--radius);padding:18px;font-size:22px}

    .side{display:grid;gap:12px}
    .chip{display:inline-flex;gap:8px;align-items:center;background:rgba(255,255,255,.06);border-radius:999px;padding:6px 10px;border:1px solid rgba(255,255,255,.12)}
    .badge{font-size:12px;padding:4px 8px;border-radius:999px;border:1px solid rgba(255,255,255,.15)}
    .list{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:8px;max-height:340px;overflow:auto}
    .item{background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.08);border-radius:12px;padding:10px 12px;font-size:14px}

    .progress{height:6px;border-radius:999px;background:rgba(255,255,255,.08);overflow:hidden}
    .bar{height:100%;width:0;background:linear-gradient(90deg,var(--accent),var(--accent2))}

    .footer{margin-top:10px;color:var(--muted);font-size:13px}

    /* PRINT */
    @media print{ .no-print{display:none} body{background:white;color:black} .wrap{max-width:100%;margin:0;padding:0} }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="logo">DL</div>
      <div>
        <h1>Dice of Love</h1>
        <div class="sub">Lempar dadu ‚Üí jalankan aksi romantis/flirty. Consent‚Äëfirst, PG‚Äë13. üíñ</div>
      </div>
    </header>

    <div class="panel">
      <div class="controls no-print">
        <label class="pill">Mode:
          <select id="mode">
            <option value="one">1 Dadu</option>
            <option value="two">2 Dadu (kombinasi)</option>
          </select>
        </label>
        <label class="pill">Spice:
          <select id="spice">
            <option value="sweet">Sweet üç¨ (ringan)</option>
            <option value="spicy">Spicy üå∂ (flirty)</option>
            <option value="saucy">Saucy üî• (PG‚Äë13)</option>
            <option value="all" selected>Semua</option>
          </select>
        </label>
        <label class="pill"><input type="checkbox" id="timerToggle" checked> Timer 30 detik</label>
        <button id="btnRoll">Lempar (Space)</button>
        <button id="btnAdd">+ Custom Aksi</button>
        <button id="btnList">Liat Semua</button>
        <button id="btnCopy">Copy</button>
      </div>

      <div class="board">
        <section class="stage">
          <div class="dice-area" id="diceArea">
            <!-- Die A -->
            <div class="die" id="dieA" aria-label="die">
              <!-- generate faces via JS -->
            </div>
            <!-- Die B (hidden for 1-die mode) -->
            <div class="die" id="dieB" aria-label="die" style="display:none"></div>
          </div>
          <div class="progress no-print"><div class="bar" id="bar"></div></div>
          <div class="result" id="result">Klik <b>Lempar</b> atau tekan <b>Space</b> untuk mulai üé≤</div>
        </section>

        <aside class="side">
          <div class="chip"><span class="badge">Consent</span> Stop saat salah satu bilang <b>RED</b>. Istirahat jika <b>YELLOW</b>.</div>
          <div class="chip"><span class="badge">Aturan</span> Boleh skip 1 aksi per ronde. Aksi harus tetap sopan & nyaman.</div>
          <div class="chip"><span class="badge">Tip</span> Atur musik pelan + lampu warm biar vibes makin dapet üòå</div>
          <div class="list" id="recent"></div>
        </aside>
      </div>

      <div class="footer">Konten dijaga tetap santun (tanpa eksplisit). Gunakan fitur <b>+ Custom Aksi</b> untuk menambah atau menyesuaikan.</div>
    </div>
  </div>

  <audio id="snd" preload="auto">
    <source src="data:audio/wav;base64,UklGRpYAAABXQVZFZm10IBAAAAABAAEAESsAACJWAAACABYAZGF0YQAAAAAA//8AAP//AAD//wAA//8AAP//AAD//wAA" type="audio/wav">
  </audio>

<script>
  // --------------------------
  // DATA: mapping dadu ‚Üí aksi (PG-13)
  // --------------------------
  const ACTIONS = {
    sweet: {
      1: "Peluk 20 detik sambil tarik napas bareng.",
      2: "Sebut 3 hal yang kamu syukuri tentang pasangan.",
      3: "Tatap mata 15 detik, lalu senyum bersamaan.",
      4: "Pilih lagu romantis & goyang pelan 30 detik.",
      5: "Tulis catatan manis 1 kalimat & bacakan.",
      6: "Pegang tangan & ceritakan momen favorit minggu ini.",
      // combos for two dice
      "1+1": "Foto selfie berdua dengan pose paling gemes.",
      "1+2": "Panggil pasangan dengan panggilan sayang baru hari ini.",
      "1+3": "Cerita harapan kecil untuk esok hari.",
      "1+4": "Buat jabat tangan rahasia berdua.",
      "1+5": "Tukar playlist favorit masing-masing.",
      "1+6": "Ucapkan terima kasih untuk 1 hal kecil yang sering terlewat.",
      "2+2": "Buat rencana kencan sederhana akhir pekan ini.",
      "2+3": "Beri 3 pujian tulus.",
      "2+4": "Cerita masa kecil yang lucu 30 detik.",
      "2+5": "Tulis mimpi bersama di catatan HP.",
      "2+6": "Buat kode ‚Äòaku kangen‚Äô berupa gestur kecil.",
      "3+3": "Tukar barang kecil untuk dibawa besok (misal gantungan).",
      "3+4": "Main bisik-bisik 10 kata yang bikin senyum.",
      "3+5": "Tentukan satu kebiasaan baik yang mau dijaga minggu ini.",
      "3+6": "Pilih foto favorit kita & jadikan wallpaper 1 hari.",
      "4+4": "Cerita hal paling kamu kagumi dari pasangan.",
      "4+5": "Buat daftar mini ‚Äòbucket list‚Äô berdua (3 item).",
      "4+6": "Peluk dari belakang 15 detik.",
      "5+5": "Tulis pesan ‚Äògood night‚Äô manis untuk dikirim nanti.",
      "5+6": "Bikin minuman hangat untuk pasangan.",
      "6+6": "Tentukan tema kencan berikutnya (misal: cafe hopping)."
    },
    spicy: {
      1: "Bisikkan pujian flirty (maks. 10 kata).",
      2: "Pilih outfit/aksesori yang pengen lihat kupakai besok.",
      3: "Kirim voice note 8 detik berisi godaan manis.",
      4: "Genggam tangan & gambar inisial kita pakai jari.",
      5: "Bisikkan panggilan sayang paling ‚Äòberbahaya‚Äô.",
      6: "Pilih spot favorit di wajahku, kasih perhatian 5 detik.",
      "1+1": "Share fantasi kencan elegan (tanpa vulgar) 20 detik.",
      "1+2": "Buat ‚Äòkode godaan‚Äô rahasia (gestur kecil).",
      "1+3": "Tantang pasangan kirim pesan flirty nanti malam.",
      "1+4": "Pose couple foto ala majalah (1 jepretan).",
      "1+5": "Ajak slow sway sambil bisik 1 kalimat nakal yang sopan.",
      "1+6": "Tentukan lokasi duduk cuddling terenak malam ini.",
      "2+2": "Roleplay 20 detik: barista & pelanggan favorit.",
      "2+3": "Tulis 2 kalimat godaan halus untuk dikirim besok.",
      "2+4": "Pilih film yang ‚Äòchemistry‚Äô-nya kenceng buat ditonton bareng.",
      "2+5": "Kasih 3 pujian fisik yang classy.",
      "2+6": "Selfie berdua dengan pose paling PD.",
      "3+3": "Buat janji kencan mendadak (tempat & jam).",
      "3+4": "Buat tantangan ‚Äòhindari HP 20 menit‚Äô.",
      "3+5": "Tentukan lagu ‚Äòkode kita‚Äô saat kangen.",
      "3+6": "Tulis 3 clue godaan untuk treasure hunt kecil.",
      "4+4": "Tukar wallpaper HP pakai foto bareng.",
      "4+5": "Sebut 2 area favoritku (non-vulgar).",
      "4+6": "Pilih parfum/ aroma favorit buat kencan berikutnya.",
      "5+5": "Ngobrol 2 menit hanya pakai bisik-bisik.",
      "5+6": "Bikin panggilan sayang baru yang ‚Äòrahasia‚Äô.",
      "6+6": "Tentukan dress code kencan berikut (casual/ formal)."
    },
    saucy: {
      1: "Describe momen paling ‚Äòchemistry‚Äô (tanpa detail vulgar).",
      2: "Nilai tingkat ‚Äònakal elegan‚Äô malam idealmu (1‚Äì10) dan kenapa.",
      3: "Pilih 1 tantangan romantis untuk malam ini (PG‚Äë13).",
      4: "Tulis 3 kalimat godaan halus untuk nanti malam.",
      5: "Cerita red line & green light biar saling paham.",
      6: "Kasih ‚Äòpickup line‚Äô paling nakal tapi sopan.",
      "1+1": "Rancang kencan elegan bertema (misal speakeasy/rooftop).",
      "1+2": "Buat menu ‚Äòmovie + snack‚Äô untuk late night.",
      "1+3": "Invent 1 permainan flirty baru (PG‚Äë13).",
      "1+4": "Tulis 2 pesan rahasia untuk dikirim esok pagi.",
      "1+5": "Pilih kode ‚Äòpamit dulu‚Äô saat butuh jeda di game ini.",
      "1+6": "Buat aturan ‚Äòno phone zone‚Äô 20 menit malam ini.",
      "2+2": "List 3 hal yang bikin kamu paling merasa diinginkan.",
      "2+3": "Tentukan ‚Äòsafe word‚Äô cadangan selain RED/YELLOW.",
      "2+4": "Ceritakan fantasi kencan city‚Äënight drive.",
      "2+5": "Pilih 1 lagu untuk slow sway berdua sekarang.",
      "2+6": "Buat rencana sarapan bareng besok.",
      "3+3": "Tulis 3 pertanyaan flirty untuk ronde berikutnya.",
      "3+4": "Main ‚Äòcompliment volley‚Äô: saling puji bergantian 5√ó.",
      "3+5": "Buat daftar mini hadiah kecil yang pengen kamu terima.",
      "3+6": "Tentukan ‚Äòtema obrolan‚Äô deep talk 10 menit.
      ",
      "4+4": "Cerita momen ketika kamu paling merasa ‚Äòklik‚Äô.",
      "4+5": "Buat 1 batas nyaman baru yang disepakati bersama.",
      "4+6": "Rencanakan micro‚Äëdate 30 menit setelah game ini.",
      "5+5": "Ceritakan 2 hal yang ingin kamu eksplor (tanpa vulgar).",
      "5+6": "Buat 1 tradisi malam mingguan romantis.",
      "6+6": "Set ‚Äòritual cuddle‚Äô sebelum tidur malam ini."
    }
  };

  // Load & persist custom
  const CUSTOM = JSON.parse(localStorage.getItem('dol_custom')||'{}');
  // CUSTOM structure: { sweet: {1:"...", "1+2":"..."}, spicy:{...}, saucy:{...} }

  // Utilities
  const pick = (n)=> Math.floor(Math.random()*n)+1;
  const el = (id)=> document.getElementById(id);
  const escapeHTML = s=> s.replace(/[&<>"']/g, c=>({"&":"&amp;","<":"&lt;",">":"&gt;","\"":"&quot;","'":"&#39;"}[c]));

  // Build dice faces
  function buildDie(node){
    node.innerHTML='';
    for(let face=1; face<=6; face++){
      const f = document.createElement('div');
      f.className='face hide';
      // 3x3 grid positions to place pips
      const positions = [
        [0,0,0,0,1,0,0,0,0], //1 center
        [1,0,0,0,0,0,0,0,1], //2 TL BR
        [1,0,0,0,1,0,0,0,1], //3 TL C BR
        [1,0,1,0,0,0,1,0,1], //4 corners
        [1,0,1,0,1,0,1,0,1], //5 corners + center
        [1,1,1,0,0,0,1,1,1], //6 3 left + 3 right
      ][face-1];
      positions.forEach(v=>{
        const cell = document.createElement('div');
        if(v){ const p=document.createElement('div'); p.className='pip'; cell.appendChild(p);} 
        f.appendChild(cell);
      });
      node.appendChild(f);
    }
  }

  function showFace(node, value){
    [...node.children].forEach((f,i)=>{ f.classList.toggle('hide', i!==value-1)})
  }

  buildDie(el('dieA'));
  buildDie(el('dieB'));
  showFace(el('dieA'), 6);

  // Roll logic
  let rolling=false; let timer=null; let history=[];

  function roll(){
    if(rolling) return; rolling=true; 
    // sound
    try{ el('snd').currentTime=0; el('snd').play(); }catch(e){}

    const mode = el('mode').value;
    const dieA = el('dieA');
    const dieB = el('dieB');
    dieA.classList.add('roll');
    if(mode==='two'){ dieB.classList.add('roll'); }

    const start = Date.now();
    const duration = 650; //ms
    const spin = setInterval(()=>{
      const v1 = pick(6); showFace(dieA, v1);
      if(mode==='two'){ const v2 = pick(6); showFace(dieB, v2); }
      if(Date.now()-start>duration){ clearInterval(spin); finalize(); }
    }, 60);
  }

  function finalize(){
    const mode = el('mode').value;
    const spice = el('spice').value;

    const facesA = [...el('dieA').children];
    const a = facesA.findIndex(f=>!f.classList.contains('hide'))+1;
    let label = `${a}`;
    let b = null;
    if(mode==='two'){
      const facesB = [...el('dieB').children];
      b = facesB.findIndex(f=>!f.classList.contains('hide'))+1;
      label = a<=b ? `${a}+${b}` : `${b}+${a}`; // normalized key
    }

    // choose action
    const action = getAction(spice, label) || getAction('sweet', label) || `Jalankan aksi sesuai angka: ${label}`;

    // render
    el('result').innerHTML = `<div>
      <div style="display:inline-flex;gap:8px;align-items:center;margin-bottom:10px">
        <span class="badge" style="background:linear-gradient(90deg, rgba(255,134,182,.25), rgba(159,168,255,.25)); border-color:rgba(255,134,182,.45)">Result</span>
        <span class="badge">${label}</span>
        <span class="badge">${spice.toUpperCase()}</span>
      </div>
      <div style="font-size:22px;line-height:1.35">${escapeHTML(action)}</div>
    </div>`;

    // history
    history.unshift({label, action, ts:Date.now()});
    history = history.slice(0,10);
    el('recent').innerHTML = history.map(h=>`<div class="item"><b>${h.label}</b> ‚Äî ${escapeHTML(h.action)}</div>`).join('');

    // timer
    const useTimer = el('timerToggle').checked;
    if(useTimer){ runTimer(30); }

    // end roll
    el('dieA').classList.remove('roll');
    el('dieB').classList.remove('roll');
    rolling=false;
  }

  function getAction(spice, key){
    const base = ACTIONS[spice]||{};
    const custom = (CUSTOM[spice]||{});
    // prefer specific key, else single die mapping if exists
    return custom[key] || base[key] || (typeof base[+key]==='string'? base[+key]: null) || (typeof custom[+key]==='string'? custom[+key]: null);
  }

  function runTimer(sec){
    clearInterval(timer); const bar = el('bar'); bar.style.width='0%';
    const start = Date.now(); const total = sec*1000; 
    timer = setInterval(()=>{
      const p = Math.min(1, (Date.now()-start)/total);
      bar.style.width = (p*100)+'%';
      if(p>=1){ clearInterval(timer); }
    }, 60);
  }

  // UI wiring
  el('mode').addEventListener('change', (e)=>{
    const two = e.target.value==='two';
    el('dieB').style.display = two ? 'grid' : 'none';
  });
  el('btnRoll').addEventListener('click', roll);
  document.addEventListener('keydown', (e)=>{ if(e.code==='Space'){ e.preventDefault(); roll(); }});

  el('btnList').addEventListener('click', ()=>{
    const spice = el('spice').value;
    const base = ACTIONS[spice]==null ? {...ACTIONS.sweet, ...ACTIONS.spicy, ...ACTIONS.saucy} : ACTIONS[spice];
    const custom = CUSTOM[spice]||{};
    const entries = Object.entries({...base, ...custom})
      .sort((a,b)=> a[0].toString().localeCompare(b[0].toString(), undefined,{numeric:true}))
      .map(([k,v])=> `${k}: ${v}`)
      .join('\n');
    const w = window.open('', '_blank');
    w.document.write('<pre style="white-space:pre-wrap;font-family:Inter,system-ui;padding:16px">'+escapeHTML(entries)+'</pre>');
    w.document.close();
  });

  el('btnCopy').addEventListener('click', async ()=>{
    const txt = el('result').innerText.trim();
    try{ await navigator.clipboard.writeText(txt); alert('Tersalin ke clipboard ‚úî'); }catch(e){ alert('Gagal menyalin otomatis. Silakan salin manual.'); }
  });

  el('btnAdd').addEventListener('click', ()=>{
    const spice = prompt('Kategori? ketik: sweet / spicy / saucy','sweet');
    if(!spice || !['sweet','spicy','saucy'].includes(spice)) return;
    const key = prompt('Masukkan angka 1-6 atau kombinasi (mis. 2+5):','1');
    if(!key) return;
    const val = prompt('Tulis aksi (PG‚Äë13, sopan):','');
    if(!val) return;
    CUSTOM[spice] = CUSTOM[spice]||{};
    CUSTOM[spice][key] = val;
    localStorage.setItem('dol_custom', JSON.stringify(CUSTOM));
    alert('Custom aksi ditambahkan ‚úî');
  });

  // init
  showFace(el('dieA'),6);
  showFace(el('dieB'),6);
</script>
</body>
</html>
